(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7275792a"],{"061e":function(t,e,a){},"9e01":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("div",{staticClass:"search"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入模板名称",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.goSearch},slot:"append"})],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"default-sort":{prop:"createDate",order:"descending"}}},[a("el-table-column",{attrs:{prop:"name",label:"模板名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"上传日期",prop:"createDate",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"img_url",label:"模板预览"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"my-pic"},[a("el-image",{staticStyle:{width:"120px",height:"120px"},attrs:{fit:"scale-down",src:e.row.imgUrl,"preview-src-list":t.srcList},on:{click:function(a){return t.imgClick(e.row.imgUrl)}}})],1)}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("el-button",{attrs:{size:"small",type:"danger",round:""},on:{click:function(a){return t.deleteTemplate(e.row.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary",round:""},on:{click:function(a){return t.downloadFile(e.row.name,e.row.imgUrl)}}},[t._v("下载")])],1)}}])})],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.pageChange,"prev-click":t.pageChange,"next-click":t.pageChange}}),t._v(" "),a("el-upload",{staticClass:"upload template",attrs:{action:"http://219.228.76.43:8886/admin/upload",headers:t.headers,"on-success":t.uploadSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传模板")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传.jpg文件")])],1)],1)},o=[],l={data:function(){return{pageSize:6,total:6,srcList:[],tableData:[],keyword:"",headers:{token:localStorage.getItem("token")}}},created:function(){this.getTemplateList()},methods:{imgClick:function(t){this.srcList=[t]},getTemplateList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=this;this.req({url:"getTemplateList?page=".concat(t,"&limit=").concat(e),data:{},method:"GET"}).then((function(t){console.log("res :",t),a.total=t.data.total;for(var e=t.data.data,n=0;n<e.length;n++)e[n].createDate=a.getTime(e[n].createDate);a.tableData=e}),(function(t){console.log("err :",t)}))},goSearch:function(){var t=this;if(t.keyword.length<1)return t.getTemplateList(),0;this.req({url:"searchTemplate?keyword="+t.keyword,data:{},method:"GET"}).then((function(e){if(console.log("res :",e),e.data.length<1)return t.$message("查询无果~"),0;t.$message("查询成功~");for(var a=0;a<e.data.length;a++)e.data[a].createDate=t.getTime(e.data[a].createDate);t.tableData=e.data}),(function(t){console.log("err :",t)}))},deleteTemplate:function(t){var e=this,a=this;this.$confirm("此操作将删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.req({url:"deleteTemplate?id="+t,data:{},method:"GET"}).then((function(t){console.log("res :",t),a.getTemplateList(),a.$message("删除成功~")}),(function(t){console.log("err :",t)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},downloadTemplate:function(t){},uploadSuccess:function(t,e,a){var n=this,o=this;console.log(":",t),this.$message("上传成功~"),this.$prompt("请输入模板名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){var a=e.value;o.req({url:"addTemplate",data:{name:a,imgUrl:t.data,createDate:(new Date).getTime()},method:"POST"}).then((function(t){console.log("res :",t),o.getTemplateList()}),(function(t){console.log("err :",t)}))})).catch((function(){n.$message({type:"info",message:"取消上传"})}))},getTime:function(t){var e=this;t=parseInt(t);var a=new Date(t),n=a.getFullYear()+"-",o=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-",l=e.change(a.getDate())+" ",r=e.change(a.getHours())+":",s=e.change(a.getMinutes())+":",i=e.change(a.getSeconds());return n+o+l+r+s+i},change:function(t){return t<10?"0"+t:t},downloadFile:function(t,e){console.log("name :",t),console.log("href :",e);var a=document.createElement("a"),n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),a.href=e,a.download=t,a.dispatchEvent(n)},pageChange:function(t){console.log("page :",t),this.getTemplateList(t)}}},r=l,s=(a("b294"),a("2877")),i=Object(s["a"])(r,n,o,!1,null,null,null);e["default"]=i.exports},b294:function(t,e,a){"use strict";a("061e")}}]);