(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fcb3c584"],{"4dc0":function(e,t,a){"use strict";a("4df9")},"4df9":function(e,t,a){},"68a0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"root"},[a("div",{staticClass:"search"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入素材名称",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchByKeyword},slot:"append"})],1)],1),e._v(" "),a("div",{staticClass:"my-flex"},[a("el-date-picker",{staticClass:"search-by-time",attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}}),e._v(" "),a("el-button",{staticClass:"my-btn",attrs:{type:"primary"},on:{click:e.searchByTime}},[e._v("开始搜索")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"default-sort":{prop:"createDate",order:"descending"}}},[a("el-table-column",{attrs:{prop:"name",label:"素材名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"上传日期",prop:"createDate",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"img_url",label:"素材预览"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"my-pic"},[a("el-image",{staticStyle:{width:"120px",height:"120px"},attrs:{fit:"scale-down",src:t.row.imgUrl,"preview-src-list":e.srcList},on:{click:function(a){return e.imgClick(t.row.imgUrl)}}})],1)}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("el-button",{attrs:{size:"small",type:"danger",round:""},on:{click:function(a){return e.deleteMaterial(t.row.id)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",round:""},on:{click:function(a){return e.downloadFile(t.row.name,t.row.imgUrl)}}},[e._v("下载")])],1)}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize},on:{"current-change":e.pageChange,"prev-click":e.pageChange,"next-click":e.pageChange}}),e._v(" "),a("el-upload",{staticClass:"upload template",attrs:{action:"http://219.228.76.43:8886/admin/upload",headers:e.headers,"on-success":e.uploadSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传素材")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("建议: jpg文件 分辨率1920*1080")])],1)],1)},i=[],o={data:function(){return{pageSize:6,total:6,srcList:[],tableData:[],keyword:"",headers:{token:localStorage.getItem("token")},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近五天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-432e6),e.$emit("pick",[a,t])}},{text:"最近三天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e5),e.$emit("pick",[a,t])}}]},searchTime:""}},created:function(){this.getMaterialList()},methods:{imgClick:function(e){this.srcList=[e]},getMaterialList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=this;this.req({url:"getMaterialList?page=".concat(e,"&limit=").concat(t),data:{},method:"GET"}).then((function(e){console.log("res :",e),a.total=e.data.total;for(var t=e.data.data,n=0;n<t.length;n++)t[n].createDate=a.getTime(t[n].createDate);a.tableData=t}),(function(e){console.log("err :",e)}))},deleteMaterial:function(e){var t=this,a=this;this.$confirm("此操作将删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.req({url:"deleteMaterial?id="+e,data:{},method:"GET"}).then((function(e){console.log("res :",e),a.getMaterialList(),a.$message("删除成功~")}),(function(e){console.log("err :",e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},uploadSuccess:function(e,t,a){var n=this,i=this;console.log(":",e),this.$message("上传成功~"),this.$prompt("请输入素材名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var a=t.value;i.req({url:"addMaterial",data:{name:a,imgUrl:e.data,createDate:(new Date).getTime()},method:"POST"}).then((function(e){console.log("res :",e),i.getMaterialList()}),(function(e){console.log("err :",e)}))})).catch((function(){n.$message({type:"info",message:"取消上传"})}))},getTime:function(e){var t=this;e=parseInt(e);var a=new Date(e),n=a.getFullYear()+"-",i=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-",o=t.change(a.getDate())+" ",r=t.change(a.getHours())+":",l=t.change(a.getMinutes())+":",s=t.change(a.getSeconds());return n+i+o+r+l+s},change:function(e){return e<10?"0"+e:e},downloadFile:function(e,t){console.log("name :",e),console.log("href :",t);var a=document.createElement("a"),n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),a.href=t,a.download=e,a.dispatchEvent(n)},searchByKeyword:function(){var e=this;if(e.keyword.length<1)return e.getMaterialList(),0;this.req({url:"searchMaterial?keyword="+e.keyword,data:{},method:"GET"}).then((function(t){if(console.log("res :",t),t.data.length<1)return e.$message("查询无果~"),0;e.$message("查询成功~");for(var a=0;a<t.data.length;a++)t.data[a].createDate=e.getTime(t.data[a].createDate);e.total=1,e.tableData=t.data}),(function(e){console.log("err :",e)}))},pageChange:function(e){console.log("page :",e),this.getMaterialList(e)},searchByTime:function(){var e=this,t=new Date(this.searchTime[0]).getTime(),a=new Date(this.searchTime[1]).getTime();console.log("beginTime :",t),this.req({url:"searchMaterialByTime?beginTime=".concat(t,"&endTime=").concat(a),data:{},method:"GET"}).then((function(t){if(console.log("res :",t),t.data.length<1)return e.$message("查询无果~"),0;e.$message("查询成功~");for(var a=0;a<t.data.length;a++)t.data[a].createDate=e.getTime(t.data[a].createDate);e.total=1,e.tableData=t.data}),(function(e){console.log("err :",e)}))}}},r=o,l=(a("4dc0"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,null,null);t["default"]=s.exports}}]);