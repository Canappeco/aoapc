(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9cc73386"],{"66ef":function(t,e,o){"use strict";o("b2ce")},b2ce:function(t,e,o){},ed64:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"root"},[o("div",{staticClass:"search"},[o("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入logo名称",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.goSearch},slot:"append"})],1)],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"default-sort":{prop:"createDate",order:"descending"}}},[o("el-table-column",{attrs:{prop:"name",label:"logo名称","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{label:"上传日期",prop:"createDate",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"img_url",label:"logo预览"},scopedSlots:t._u([{key:"default",fn:function(e){return o("div",{staticClass:"my-pic"},[o("el-image",{staticStyle:{width:"120px",height:"120px"},attrs:{fit:"scale-down",src:e.row.imgUrl,"preview-src-list":t.srcList},on:{click:function(o){return t.imgClick(e.row.imgUrl)}}})],1)}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return o("div",{},[o("el-button",{attrs:{size:"small",type:"danger",round:""},on:{click:function(o){return t.deleteLogo(e.row.id)}}},[t._v("删除")]),t._v(" "),o("el-button",{attrs:{size:"small",type:"primary",round:""},on:{click:function(o){return t.downloadFile(e.row.name,e.row.imgUrl)}}},[t._v("下载")])],1)}}])})],1),t._v(" "),o("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.pageChange,"prev-click":t.pageChange,"next-click":t.pageChange}}),t._v(" "),o("el-upload",{staticClass:"upload template",attrs:{headers:t.headers,action:"http://219.228.76.43:8886/admin/upload","on-success":t.uploadSuccess}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传logo")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(".png格式 尺寸200*200以内")])],1)],1)},n=[],l={data:function(){return{keyword:"",pageSize:6,total:6,srcList:[],tableData:[],headers:{token:localStorage.getItem("token")}}},created:function(){this.getLogoList()},methods:{imgClick:function(t){this.srcList=[t]},getLogoList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=this;this.req({url:"getLogoList?page=".concat(t,"&limit=").concat(e),data:{},method:"GET"}).then((function(t){console.log("res :",t),o.total=t.data.total;for(var e=t.data.data,a=0;a<e.length;a++)e[a].createDate=o.getTime(e[a].createDate);o.tableData=e}),(function(t){console.log("err :",t)}))},deleteLogo:function(t){var e=this,o=this;this.$confirm("此操作将删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.req({url:"deleteLogo?id="+t,data:{},method:"GET"}).then((function(t){console.log("res :",t),o.getLogoList(),o.$message("删除成功~")}),(function(t){console.log("err :",t)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},downloadLogo:function(t){},uploadSuccess:function(t,e,o){var a=this,n=this;console.log(":",t),this.$message("上传成功~"),this.$prompt("请输入logo名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){var o=e.value;n.req({url:"addLogo",data:{name:o,imgUrl:t.data,createDate:(new Date).getTime()},method:"POST"}).then((function(t){console.log("res :",t),n.getLogoList()}),(function(t){console.log("err :",t)}))})).catch((function(){a.$message({type:"info",message:"取消上传"})}))},getTime:function(t){var e=this;t=parseInt(t);var o=new Date(t),a=o.getFullYear()+"-",n=(o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1)+"-",l=e.change(o.getDate())+" ",c=e.change(o.getHours())+":",s=e.change(o.getMinutes())+":",r=e.change(o.getSeconds());return a+n+l+c+s+r},change:function(t){return t<10?"0"+t:t},downloadFile:function(t,e){console.log("name :",t),console.log("href :",e);var o=document.createElement("a"),a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),o.href=e,o.download=t,o.dispatchEvent(a)},pageChange:function(t){console.log("page :",t),this.getLogoList(t)},goSearch:function(){var t=this;if(t.keyword.length<1)return t.getLogoList(),0;this.req({url:"searchLogo?keyword="+t.keyword,data:{},method:"GET"}).then((function(e){if(console.log("res :",e),e.data.length<1)return t.$message("查询无果~"),0;t.$message("查询成功~");for(var o=0;o<e.data.length;o++)e.data[o].createDate=t.getTime(e.data[o].createDate);t.tableData=e.data}),(function(t){console.log("err :",t)}))}}},c=l,s=(o("66ef"),o("2877")),r=Object(s["a"])(c,a,n,!1,null,null,null);e["default"]=r.exports}}]);